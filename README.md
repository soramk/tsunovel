# Tsunovel - Web Novel Reader App

Web小説を収集（積ん読）し、自分好みの快適な環境で読むためのリーダーアプリです。

## コンセプト

「集める楽しさ」と「没頭できる読書体験」の両立を目指しています。ライブラリ画面では、魔法のアーカイブから巻物を取り出すような幻想的な体験を、リーダー画面では装飾を削ぎ落とした純粋な読書体験を提供します。

## 主な機能

### 1. ライブラリ画面 (Library View)

- **Makimono UI**: 小説を「巻物」として表現した幻想的なデザイン
- **マルチデバイス・レイアウト**:
  - **Desktop**: 多数の作品を一覧できるレスポンシブな多段グリッド表示
  - **Mobile**: 縦型ブックリストによる最適化されたブラウジング
- **フィルタリング**: ジャンル別、または「お気に入り」による絞り込み機能
- **読書履歴**: 最近読んだ作品への素早いアクセス（サイドバーに表示）
- **ダウンロード状況表示**: 各作品のオフラインダウンロード進捗をプログレスバーとアイコンで表示
- **管理機能**: 小説の「召喚（追加）」および「還送（削除）」をサポート

### 2. リーダー画面 (Reader View)

- **没頭モード**: ヘッダー以外の装飾を排除した読書環境
- **高度なカスタマイズ**:
  - **テーマ**: ライト / セピア / ダーク / 珈琲 / ミッドナイト / オーシャン / 森 等、10種類のテーマを用意
  - **フォント**: 明朝体 / ゴシック体 / Noto Serif / Noto Sans / M PLUS / Zen Kaku / Kaisei / Shippori / Hina / DotGothic / Courier 等、多数のWebフォントに対応
  - **調整項目**: 文字サイズ（12〜40）、行間（0.5〜3.0）、文字色の詳細な設定
- **ページ遷移モード**: ボタン式 / スクロール式の2種類を選択可能
- **タイトル表示設定**: ヘッダー・フッターのタイトル表示をON/OFF可能
- **しおり機能**: 最後に読んだ位置を作品ごとに自動保存
- **目次機能**: サイドパネルから任意の話数へジャンプ可能

### 3. オフラインダウンロード機能

- **一括ダウンロード**: 小説全話をローカルストレージに保存してオフラインで読書可能
- **再開可能**: ダウンロードが途中で止まっても、再度ボタンを押すと未取得分から再開
- **進捗表示**: 詳細モーダルでダウンロード済み話数とプログレスバーを確認可能
- **各話ステータス**: 話ごとのダウンロード状態をグリッド表示で確認可能
- **データ削除**: オフラインデータを一括削除する機能

### 4. 小説取得・同期機能 (GitHub Actions 連携)

- **なろう/R18対応**: 「小説家になろう」および「ノクターン/ムーンライト/ミッドナイトノベルズ」に対応
- **マルチ・バッチ取得**: 複数の小説URLやNCODEを一度に「召喚」可能
- **自動エピソード取得**: GitHub Actions を使用して、バックグラウンドで最新エピソードまで自動収集
- **同期・保守機能**:
  - 全更新（すべての話を再取得）
  - 未取得話（新規）のみ更新
  - 特定エピソードのみ更新
  - 不要な小説の削除

## 技術スタック

- **Frontend**: React 18, Vite
- **Styling**: Tailwind CSS + Vanilla CSS (Fantasy Theme System)
- **Icons**: lucide-react (Lucide)
- **Data Storage**: localStorage（オフラインデータ）、GitHub Repository（マスターデータ）
- **Backend Automation**: GitHub Actions (Node.js)
- **Data Source**: なろう小説API (通常 / R18)

## セットアップ & ドキュメント

### クイックスタート

```bash
# 依存関係のインストール
npm install

# 開発サーバーの起動
npm run dev
```

### 詳細ガイド

- [API設定ガイド](docs/API_SETUP.md): GitHub Actionsとの連携設定
- [トラブルシューティング](docs/TROUBLESHOOTING.md): 困ったときは

## プロジェクト構造

```
tsunovel/
├── src/
│   ├── App.jsx          # メインコンポーネント (ライブラリ & リーダー)
│   ├── utils/
│   │   ├── githubActions.js # API連携・Actionsトリガー
│   │   └── novelFetcher.js  # URL解析・なろう検索
│   └── index.css        # デザインシステム (Fantasy UI)
├── docs/                # ドキュメント
│   ├── API_SETUP.md     # API設定ガイド
│   └── TROUBLESHOOTING.md # トラブルシューティング
├── storage/             # 取得済み小説データの保存先 (JSON/Text)
├── scripts/
│   ├── fetch_novel.cjs  # 小説取得エンジン
│   ├── remove_novel.cjs # 小説削除スクリプト
│   └── enrich_index.cjs # インデックス最適化スクリプト
├── api/                 # Vercel Serverless Functions
│   └── fetch-novel.js   # 小説取得API
└── .github/
    └── workflows/       # GitHub Actions ワークフロー定義
        ├── deploy.yml       # 自動デプロイ
        ├── fetch_novel.yml  # 小説取得ワークフロー
        └── remove_novel.yml # 小説削除ワークフロー
```

## 更新履歴

### v1.3 (2026-01-16)

- リーダーのヘッダー・フッターにタイトル表示をON/OFFする設定を追加
- オフラインダウンロードが途中で止まった際に再開できるよう修正
- オフラインデータを一括削除する機能を追加
- ドキュメント構造を整理（`docs/` ディレクトリに移動）

### v1.2

- ダウンロード状況表示機能を追加
- 読書履歴機能を追加
- 各種テーマ・フォントオプションを拡充

## ライセンス

このプロジェクトは個人の読書体験を向上させるためのプロトタイプです。利用規約等を遵守してご利用ください。
